<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Deutsch 4-Day ‚Ä¢ Flashcards + Quiz + Audio</title>
  <link rel="preconnect" href="https://unpkg.com"/>
  <link rel="preconnect" href="https://cdn.jsdelivr.net"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
  <style>
    :root{
      --bg: #0b0f14;
      --bg-soft:#121821;
      --card:#0f1720;
      --text: #eaf2ff;
      --muted:#a8b3c7;
      --accent:#58a6ff;
      --accent-2:#7c4dff;
      --good:#22c55e;
      --bad:#ef4444;
      --warn:#f59e0b;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      color:var(--text); background:linear-gradient(180deg,var(--bg),#0a0d12 40%, var(--bg) 100%);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .app{display:flex; flex-direction:column; min-height:100svh; padding-bottom:72px;}
    header{
      position:sticky; top:0; z-index:20; backdrop-filter:saturate(1.2) blur(8px);
      background:rgba(10,14,20,.7); border-bottom:1px solid rgba(255,255,255,.06);
    }
    .bar{display:flex; align-items:center; gap:10px; padding:10px 14px;}
    .title{font-weight:700; letter-spacing:.2px;}
    .spacer{flex:1}
    .chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,.06); color:var(--text); font-size:13px;}
    .chip[data-on="true"]{outline:2px solid var(--accent); background:rgba(88,166,255,.12)}
    .grid{display:grid; gap:14px; padding:16px;}

    /* Top controls */
    .controls{display:flex; gap:10px; overflow:auto; padding:0 14px 12px 14px;}
    .controls::-webkit-scrollbar{display:none}
    .select, .btn{border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04); color:var(--text); padding:10px 12px; border-radius:12px; font-size:14px;}
    .btn.icon{display:inline-flex; align-items:center; gap:8px}
    .btn[aria-pressed="true"]{outline:2px solid var(--accent)}
    .search{position:relative; flex:1}
    .search input{width:100%; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); color:var(--text); padding:12px 40px 12px 14px; border-radius:12px; font-size:15px;}
    .search i{position:absolute; right:10px; top:50%; translate:0 -50%; opacity:.7}

    /* Card */
    .card-wrap{display:flex; justify-content:center; align-items:center; padding:10px 16px 0}
    .card{
      width:min(720px, 100%); height:360px; border-radius:var(--radius); background:radial-gradient(1000px 300px at 20% -10%, rgba(88,166,255,.18), transparent 40%),
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08); box-shadow:var(--shadow); position:relative; perspective: 1200px; overflow:hidden;
    }
    .face{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:22px; text-align:center; font-size: clamp(24px, 5.2vw, 40px); font-weight:700; letter-spacing:.3px; line-height:1.2; border-radius:var(--radius); backface-visibility:hidden; transition:transform .6s;}
    .back{transform:rotateY(180deg)}
    .card.flipped .front{transform:rotateY(180deg)}
    .card.flipped .back{transform:rotateY(360deg)}
    .badge{position:absolute; left:14px; top:12px; font-size:12px; color:var(--muted); display:flex; align-items:center; gap:6px}
    .corner{position:absolute; right:10px; top:10px; display:flex; gap:8px}
    .corner .round{width:40px; height:40px; display:grid; place-items:center; border-radius:12px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08)}
    .meta{position:absolute; left:0; right:0; bottom:0; padding:14px; display:flex; align-items:center; justify-content:space-between; gap:10px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.35));}
    .meta .ex{font-size:14px; color:var(--muted); text-align:left}
    .meta .act{display:flex; gap:8px}

    /* List */
    .list{padding:8px 10px 18svh;}
    .row{display:flex; align-items:center; gap:10px; padding:12px; border-radius:12px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); margin:8px 6px;}
    .row .main{flex:1}
    .row .de{font-weight:700}
    .row .ru{color:var(--muted); font-size:14px}
    .row .tags{display:flex; gap:6px; margin-top:6px}
    .tag{font-size:12px; color:var(--muted); background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); padding:4px 8px; border-radius:999px}

    /* Quiz */
    .quiz{padding:16px}
    .quiz-card{border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04); border-radius:16px; padding:16px;}
    .q-word{font-size: clamp(22px, 5vw, 34px); font-weight:700; text-align:center; margin:8px 0 16px}
    .opts{display:grid; gap:10px}
    .opt{padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.06); font-size:16px;}
    .opt[data-state="good"]{outline:2px solid var(--good)}
    .opt[data-state="bad"]{outline:2px solid var(--bad)}

    .summary{display:flex; align-items:center; justify-content:space-between; padding:12px; margin-top:12px; border-radius:12px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08)}

    /* Bottom nav */
    nav{
      position:fixed; left:0; right:0; bottom:0; z-index:30; background:rgba(10,14,20,.9); backdrop-filter:saturate(1.2) blur(8px); border-top:1px solid rgba(255,255,255,.06);
      padding-bottom: max(env(safe-area-inset-bottom), 8px);
    }
    .tabs{display:grid; grid-template-columns: repeat(4, 1fr); gap:8px; padding:8px}
    .tab{display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px; padding:10px 6px; border-radius:12px; color:var(--muted)}
    .tab[data-active="true"]{color:var(--text); background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08)}

    /* Progress */
    .progress{height:10px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; background:linear-gradient(90deg,var(--accent), var(--accent-2)); width:0%}

    .pill{padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); font-size:12px; color:var(--muted)}

    .hidden{display:none !important}
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="bar">
        <div class="title">üá©üá™ Deutsch 4-Day ‚Äî A1‚ÄìA2</div>
        <span class="pill" id="count">0 —Å–ª–æ–≤</span>
        <div class="spacer"></div>
        <button class="chip" id="darkToggle" title="–¢–µ–º–∞"><i data-lucide="moon"></i><span>–¢—ë–º–Ω–∞—è</span></button>
      </div>
      <div class="controls">
        <div class="search"><input id="search" placeholder="–ü–æ–∏—Å–∫ (de/ru)"/><i data-lucide="search"></i></div>
        <select id="daySelect" class="select" title="–î–µ–Ω—å">
          <option value="all">–í—Å–µ –¥–Ω–∏</option>
          <option value="1">–î–µ–Ω—å 1</option>
          <option value="2">–î–µ–Ω—å 2</option>
          <option value="3">–î–µ–Ω—å 3</option>
          <option value="4">–î–µ–Ω—å 4</option>
        </select>
        <select id="modeSelect" class="select" title="–†–µ–∂–∏–º">
          <option value="cards">–ö–∞—Ä—Ç–æ—á–∫–∏</option>
          <option value="list">–°–ø–∏—Å–æ–∫</option>
          <option value="quiz">–¢–µ—Å—Ç</option>
          <option value="plan">–ü–ª–∞–Ω</option>
        </select>
        <button class="btn icon" id="starOnly"><i data-lucide="star"></i>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
      </div>
    </header>

    <main id="views">
      <!-- Cards View -->
      <section id="cardsView" class="grid">
        <div class="card-wrap">
          <div class="card" id="card">
            <div class="face front">
              <div class="badge"><i data-lucide="badge-check"></i><span id="cardMeta">‚Äî</span></div>
              <div class="corner">
                <button class="round" id="speakDE" title="–û–∑–≤—É—á–∏—Ç—å –ø–æ-–Ω–µ–º–µ—Ü–∫–∏"><i data-lucide="volume-2"></i></button>
                <button class="round" id="speakRU" title="–û–∑–≤—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥"><i data-lucide="volume"></i></button>
                <button class="round" id="starBtn" title="–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"><i data-lucide="star"></i></button>
              </div>
              <div id="cardWord">‚Äî</div>
              <div class="meta">
                <div class="ex" id="example">&nbsp;</div>
                <div class="act">
                  <button class="btn" id="flip">–ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥</button>
                  <button class="btn" id="know">–ó–Ω–∞—é</button>
                  <button class="btn" id="next">–î–∞–ª–µ–µ</button>
                </div>
              </div>
            </div>
            <div class="face back">
              <div class="badge"><i data-lucide="book-text"></i><span>–ü–µ—Ä–µ–≤–æ–¥</span></div>
              <div class="corner">
                <button class="round" id="speakDE2" title="–û–∑–≤—É—á–∏—Ç—å –ø–æ-–Ω–µ–º–µ—Ü–∫–∏"><i data-lucide="volume-2"></i></button>
                <button class="round" id="speakRU2" title="–û–∑–≤—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥"><i data-lucide="volume"></i></button>
              </div>
              <div id="cardTrans">‚Äî</div>
              <div class="meta">
                <div class="ex" id="example2">&nbsp;</div>
                <div class="act">
                  <button class="btn" id="flipBack">–ù–∞–∑–∞–¥</button>
                  <button class="btn" id="shuffle">–ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="grid">
          <div class="summary">
            <div>
              <div style="font-weight:700">–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –Ω–∞–±–æ—Ä—É</div>
              <div class="pill" id="progressText">0 / 0</div>
            </div>
            <div class="progress" style="flex:1; margin-left:10px"><i id="progressBar"></i></div>
          </div>
        </div>
      </section>

      <!-- List View -->
      <section id="listView" class="list hidden"></section>

      <!-- Quiz View -->
      <section id="quizView" class="quiz hidden">
        <div class="quiz-card">
          <div style="display:flex; gap:8px; align-items:center; justify-content:space-between">
            <div class="pill" id="quizInfo">–í–æ–ø—Ä–æ—Å 1/10</div>
            <div style="display:flex; gap:8px">
              <button class="btn icon" id="quizPlay"><i data-lucide="volume-2"></i>–û–∑–≤—É—á–∏—Ç—å</button>
              <button class="btn icon" id="quizRestart"><i data-lucide="refresh-ccw"></i>–°–Ω–æ–≤–∞</button>
            </div>
          </div>
          <div class="q-word" id="qWord">‚Äî</div>
          <div class="opts" id="opts"></div>
          <div class="summary" id="quizSummary" style="display:none">
            <div>–†–µ–∑—É–ª—å—Ç–∞—Ç: <b id="score">0/10</b></div>
            <div style="display:flex; gap:8px">
              <button class="btn" id="quizAgain">–ï—â—ë —Ä–∞–∑</button>
              <button class="btn" id="quizCards">–ö –∫–∞—Ä—Ç–æ—á–∫–∞–º</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Plan View -->
      <section id="planView" class="grid hidden" style="padding-bottom:20svh">
        <div class="summary">
          <div>
            <div style="font-weight:700; margin-bottom:6px">–ü–ª–∞–Ω –Ω–∞ 4 –¥–Ω—è</div>
            <div class="pill">–¶–µ–ª—å: –≤—ã—É—á–∏—Ç—å –º–∞–∫—Å–∏–º—É–º –Ω—É–∂–Ω—ã—Ö —Å–ª–æ–≤ –∑–∞ 4 –¥–Ω—è</div>
          </div>
          <button class="btn icon" id="resetProgress"><i data-lucide="eraser"></i>–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
        </div>
        <div id="planCards" class="grid"></div>
      </section>
    </main>

    <nav>
      <div class="tabs">
        <button class="tab" data-tab="cards" data-active="true"><i data-lucide="flip-horizontal"></i><span>–ö–∞—Ä—Ç–æ—á–∫–∏</span></button>
        <button class="tab" data-tab="list"><i data-lucide="list"></i><span>–°–ø–∏—Å–æ–∫</span></button>
        <button class="tab" data-tab="quiz"><i data-lucide="check-square"></i><span>–¢–µ—Å—Ç</span></button>
        <button class="tab" data-tab="plan"><i data-lucide="calendar"></i><span>–ü–ª–∞–Ω</span></button>
      </div>
    </nav>
  </div>

  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    // --------------------- DATA (–°–∞–º—ã–µ –Ω—É–∂–Ω—ã–µ ‚Äî Core) ---------------------
    // –§–æ—Ä–º–∞—Ç: {id, de, ru, pos, article, lesson, ex, day (1..4), core:true}
    const WORDS = [
      // DAY 1 ‚Äî –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –±–∞–∑–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã, –º–æ–¥–∞–ª—å–Ω—ã–µ, –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ
      {id:1, day:1, core:true, lesson:'1.1', de:'Hallo', ru:'–ü—Ä–∏–≤–µ—Ç', pos:'—Ñ—Ä–∞–∑–∞', ex:''},
      {id:2, day:1, core:true, lesson:'1.1', de:'Guten Tag', ru:'–î–æ–±—Ä—ã–π –¥–µ–Ω—å', pos:'—Ñ—Ä–∞–∑–∞', ex:'(der Tag)'},
      {id:3, day:1, core:true, lesson:'1.1', de:'Guten Morgen', ru:'–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ', pos:'—Ñ—Ä–∞–∑–∞', ex:'(der Morgen)'},
      {id:4, day:1, core:true, lesson:'1.1', de:'Guten Abend', ru:'–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä', pos:'—Ñ—Ä–∞–∑–∞', ex:'(der Abend)'},
      {id:5, day:1, core:true, lesson:'1.1', de:'Gute Nacht', ru:'–î–æ–±—Ä–æ–π –Ω–æ—á–∏', pos:'—Ñ—Ä–∞–∑–∞', ex:'(die Nacht)'},
      {id:6, day:1, core:true, lesson:'1.1', de:'Wie geht es dir?', ru:'–ö–∞–∫ —É —Ç–µ–±—è –¥–µ–ª–∞?', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:7, day:1, core:true, lesson:'1.1', de:'Wie geht es Ihnen?', ru:'–ö–∞–∫ —É –í–∞—Å –¥–µ–ª–∞?', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:8, day:1, core:true, lesson:'1.1', de:'Es geht', ru:'–ü–æ–π–¥—ë—Ç', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:9, day:1, core:true, lesson:'1.1', de:'Danke! Gut', ru:'–°–ø–∞—Å–∏–±–æ! –•–æ—Ä–æ—à–æ', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:10, day:1, core:true, lesson:'1.1', de:'Entschuldigung', ru:'–ò–∑–≤–∏–Ω–∏—Ç–µ', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:11, day:1, core:true, lesson:'1.1', de:'Darf ich herein?', ru:'–ú–æ–∂–Ω–æ –≤–æ–π—Ç–∏?', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:12, day:1, core:true, lesson:'1.1', de:'ja', ru:'–¥–∞', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:13, day:1, core:true, lesson:'1.1', de:'nein', ru:'–Ω–µ—Ç', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:14, day:1, core:true, lesson:'1.1', de:'Tsch√ºss', ru:'–ø–æ–∫–∞', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:15, day:1, core:true, lesson:'1.1', de:'Auf Wiedersehen', ru:'–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:16, day:1, core:true, lesson:'1.1', de:'Bis morgen', ru:'–¥–æ –∑–∞–≤—Ç—Ä–∞', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:17, day:1, core:true, lesson:'1.1', de:'bis bald', ru:'–¥–æ —Å–∫–æ—Ä–æ–≥–æ', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:18, day:1, core:true, lesson:'3.1', de:'heute', ru:'—Å–µ–≥–æ–¥–Ω—è', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:19, day:1, core:true, lesson:'3.1', de:'morgen', ru:'–∑–∞–≤—Ç—Ä–∞', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:20, day:1, core:true, lesson:'1.2', de:'wer', ru:'–∫—Ç–æ', pos:'–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ'},
      {id:21, day:1, core:true, lesson:'1.2', de:'was', ru:'—á—Ç–æ', pos:'–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ'},
      {id:22, day:1, core:true, lesson:'3', de:'wann', ru:'–∫–æ–≥–¥–∞', pos:'–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ'},
      {id:23, day:1, core:true, lesson:'1.1/3', de:'wo', ru:'–≥–¥–µ', pos:'–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ'},
      {id:24, day:1, core:true, lesson:'1.1/3', de:'wie', ru:'–∫–∞–∫', pos:'–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ'},
      {id:25, day:1, core:true, lesson:'3.1', de:'warum', ru:'–ø–æ—á–µ–º—É', pos:'–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ'},
      {id:26, day:1, core:true, lesson:'1.1', de:'machen', ru:'–¥–µ–ª–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª', ex:'Machst du Hausaufgaben?'},
      {id:27, day:1, core:true, lesson:'1.2', de:'arbeiten', ru:'—Ä–∞–±–æ—Ç–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª', ex:'Wo arbeitest du?'},
      {id:28, day:1, core:true, lesson:'1.2', de:'lernen', ru:'—É—á–∏—Ç—å—Å—è', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:29, day:1, core:true, lesson:'1.2', de:'reden', ru:'—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:30, day:1, core:true, lesson:'1.2', de:'antworten', ru:'–æ—Ç–≤–µ—á–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:31, day:1, core:true, lesson:'1.2', de:'fragen', ru:'—Å–ø—Ä–∞—à–∏–≤–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:32, day:1, core:true, lesson:'4', de:'nehmen', ru:'–±—Ä–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:33, day:1, core:true, lesson:'1.1', de:'kommen', ru:'–ø—Ä–∏—Ö–æ–¥–∏—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:34, day:1, core:true, lesson:'1.1', de:'hei√üen', ru:'–Ω–∞–∑—ã–≤–∞—Ç—å—Å—è', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:35, day:1, core:true, lesson:'1.2', de:'wiederholen', ru:'–ø–æ–≤—Ç–æ—Ä—è—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      // –º–æ–¥–∞–ª—å–Ω—ã–µ + –±–∞–∑–æ–≤—ã–µ
      {id:36, day:1, core:true, lesson:'8/5', de:'k√∂nnen', ru:'–º–æ—á—å, —É–º–µ—Ç—å', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π'},
      {id:37, day:1, core:true, lesson:'3.1/4', de:'m√∂chten', ru:'—Ö–æ—Ç–µ—Ç—å (–≤–µ–∂–ª–∏–≤–æ)', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π'},
      {id:38, day:1, core:true, lesson:'3.1', de:'m√∂gen', ru:'–ª—é–±–∏—Ç—å, –Ω—Ä–∞–≤–∏—Ç—å—Å—è', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π'},
      {id:39, day:1, core:true, lesson:'Lekt.5 S√§tze', de:'m√ºssen', ru:'–¥–æ–ª–∂–µ–Ω (–¥–æ–ª–∂–Ω–∞)', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π', ex:'Ich muss ...'},
      {id:40, day:1, core:true, lesson:'Lekt.5 S√§tze', de:'d√ºrfen', ru:'–º–æ–∂–Ω–æ, —Ä–∞–∑—Ä–µ—à–µ–Ω–æ', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π'},
      {id:41, day:1, core:true, lesson:'Lekt.5 S√§tze', de:'sollen', ru:'—Å–ª–µ–¥—É–µ—Ç', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π'},
      {id:42, day:1, core:true, lesson:'Lekt.5 S√§tze', de:'wollen', ru:'—Ö–æ—Ç–µ—Ç—å', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π', ex:'Ich will ...'},

      // DAY 2 ‚Äî –ß–∞—Å—Ç–æ—Ç–Ω—ã–µ –≥–ª–∞–≥–æ–ª—ã –∏ —Ñ—Ä–∞–∑—ã –¥–Ω—è
      {id:101, day:2, core:true, lesson:'4', de:'schreiben', ru:'–ø–∏—Å–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:102, day:2, core:true, lesson:'4', de:'lesen', ru:'—á–∏—Ç–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:103, day:2, core:true, lesson:'4', de:'trinken', ru:'–ø–∏—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:104, day:2, core:true, lesson:'1.1', de:'spielen', ru:'–∏–≥—Ä–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:105, day:2, core:true, lesson:'1.1', de:'h√∂ren', ru:'—Å–ª—É—à–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:106, day:2, core:true, lesson:'1.2', de:'√ºbersetzen', ru:'–ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:107, day:2, core:true, lesson:'1.2', de:'kochen', ru:'–≥–æ—Ç–æ–≤–∏—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:108, day:2, core:true, lesson:'5-6', de:'einkaufen', ru:'–∑–∞–∫—É–ø–∞—Ç—å—Å—è', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:109, day:2, core:true, lesson:'5-6', de:'auf-r√§umen', ru:'—É–±–∏—Ä–∞—Ç—å—Å—è', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:110, day:2, core:true, lesson:'5-6', de:'fernsehen', ru:'—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–ª–µ–≤–∏–∑–æ—Ä', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:111, day:2, core:true, lesson:'5-6', de:'besuchen', ru:'–ø–æ—Å–µ—â–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:112, day:2, core:true, lesson:'5-6', de:'spazieren gehen', ru:'–≥—É–ª—è—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:113, day:2, core:true, lesson:'5-6', de:'verl√§ngern', ru:'–ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:114, day:2, core:true, lesson:'5-6', de:'mitnehmen', ru:'–≤–∑—è—Ç—å —Å —Å–æ–±–æ–π', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:115, day:2, core:true, lesson:'3', de:'bleiben', ru:'–æ—Å—Ç–∞–≤–∞—Ç—å—Å—è', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:116, day:2, core:true, lesson:'3.1', de:'wissen', ru:'–∑–Ω–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:117, day:2, core:true, lesson:'3.1', de:'buchstabieren', ru:'–≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ –±—É–∫–≤–∞–º', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:118, day:2, core:true, lesson:'1.2', de:'joggen', ru:'–±–µ–≥–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:119, day:2, core:true, lesson:'1.2', de:'reisen', ru:'–ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:120, day:2, core:true, lesson:'5-6', de:'helfen', ru:'–ø–æ–º–æ–≥–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:121, day:2, core:true, lesson:'7', de:'einschalten', ru:'–≤–∫–ª—é—á–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:122, day:2, core:true, lesson:'7', de:'√∂ffnen', ru:'–æ—Ç–∫—Ä—ã–≤–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:123, day:2, core:true, lesson:'7', de:'telefonieren', ru:'–≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:124, day:2, core:true, lesson:'4', de:'bedeuten', ru:'–æ–∑–Ω–∞—á–∞—Ç—å', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:125, day:2, core:true, lesson:'L5 S√§tze', de:'wiederholen, bitte', ru:'–ø–æ–≤—Ç–æ—Ä–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:126, day:2, core:true, lesson:'1.2', de:'arbeiten als', ru:'—Ä–∞–±–æ—Ç–∞—Ç—å –∫–µ–º-–ª–∏–±–æ', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:127, day:2, core:true, lesson:'4', de:'herein', ru:'–≤–Ω—É—Ç—Ä—å (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)', pos:'—á–∞—Å—Ç–∏—Ü–∞'},

      // DAY 3 ‚Äî –ß–∞—Å—Ç–æ—Ç–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ
      {id:201, day:3, core:true, lesson:'1.1', de:'der Tag', ru:'–¥–µ–Ω—å', pos:'—Å—É—â', article:'der'},
      {id:202, day:3, core:true, lesson:'1.1', de:'der Morgen', ru:'—É—Ç—Ä–æ', pos:'—Å—É—â', article:'der'},
      {id:203, day:3, core:true, lesson:'1.1', de:'der Abend', ru:'–≤–µ—á–µ—Ä', pos:'—Å—É—â', article:'der'},
      {id:204, day:3, core:true, lesson:'1.1', de:'die Nacht', ru:'–Ω–æ—á—å', pos:'—Å—É—â', article:'die'},
      {id:205, day:3, core:true, lesson:'8', de:'die Woche', ru:'–Ω–µ–¥–µ–ª—è', pos:'—Å—É—â', article:'die'},
      {id:206, day:3, core:true, lesson:'8', de:'das Wochenende', ru:'–≤—ã—Ö–æ–¥–Ω—ã–µ', pos:'—Å—É—â', article:'das'},
      {id:207, day:3, core:true, lesson:'8', de:'der Arbeitstag', ru:'—Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å', pos:'—Å—É—â', article:'der'},
      {id:208, day:3, core:true, lesson:'3', de:'die Wohnung', ru:'–∫–≤–∞—Ä—Ç–∏—Ä–∞', pos:'—Å—É—â', article:'die'},
      {id:209, day:3, core:true, lesson:'3', de:'der Schrank', ru:'—à–∫–∞—Ñ', pos:'—Å—É—â', article:'der'},
      {id:210, day:3, core:true, lesson:'3', de:'das Regal', ru:'–ø–æ–ª–∫–∞', pos:'—Å—É—â', article:'das'},
      {id:211, day:3, core:true, lesson:'3', de:'die Lampe', ru:'–ª–∞–º–ø–∞', pos:'—Å—É—â', article:'die'},
      {id:212, day:3, core:true, lesson:'3', de:'der Stuhl', ru:'—Å—Ç—É–ª', pos:'—Å—É—â', article:'der'},
      {id:213, day:3, core:true, lesson:'3', de:'der Tisch', ru:'—Å—Ç–æ–ª', pos:'—Å—É—â', article:'der'},
      {id:214, day:3, core:true, lesson:'3', de:'die Stadt', ru:'–≥–æ—Ä–æ–¥', pos:'—Å—É—â', article:'die'},
      {id:215, day:3, core:true, lesson:'3', de:'der K√§se', ru:'—Å—ã—Ä', pos:'—Å—É—â', article:'der'},
      {id:216, day:3, core:true, lesson:'3.1', de:'das Buch', ru:'–∫–Ω–∏–≥–∞', pos:'—Å—É—â', article:'das'},
      {id:217, day:3, core:true, lesson:'3.1', de:'das Zimmer', ru:'–∫–æ–º–Ω–∞—Ç–∞', pos:'—Å—É—â', article:'das'},
      {id:218, day:3, core:true, lesson:'3.1', de:'das Ticket', ru:'–±–∏–ª–µ—Ç', pos:'—Å—É—â', article:'das'},
      {id:219, day:3, core:true, lesson:'3.1', de:'der Film', ru:'—Ñ–∏–ª—å–º', pos:'—Å—É—â', article:'der'},
      {id:220, day:3, core:true, lesson:'3.1', de:'die Suppe', ru:'—Å—É–ø', pos:'—Å—É—â', article:'die'},
      {id:221, day:3, core:true, lesson:'3.1', de:'der Tee', ru:'—á–∞–π', pos:'—Å—É—â', article:'der'},
      {id:222, day:3, core:true, lesson:'4', de:'das Caf√©', ru:'–∫–∞—Ñ–µ', pos:'—Å—É—â', article:'das'},
      {id:223, day:3, core:true, lesson:'4', de:'der Kaffee', ru:'–∫–æ—Ñ–µ', pos:'—Å—É—â', article:'der'},
      {id:224, day:3, core:true, lesson:'4', de:'der Kuchen', ru:'–ø–∏—Ä–æ–≥', pos:'—Å—É—â', article:'der'},
      {id:225, day:3, core:true, lesson:'4', de:'die E-Mail', ru:'—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ', pos:'—Å—É—â', article:'die'},
      {id:226, day:3, core:true, lesson:'4', de:'das Kind', ru:'—Ä–µ–±—ë–Ω–æ–∫', pos:'—Å—É—â', article:'das'},
      {id:227, day:3, core:true, lesson:'5-6', de:'der Urlaub', ru:'–æ—Ç–ø—É—Å–∫', pos:'—Å—É—â', article:'der'},
      {id:228, day:3, core:true, lesson:'5-6', de:'die Oma', ru:'–±–∞–±—É—à–∫–∞', pos:'—Å—É—â', article:'die'},
      {id:229, day:3, core:true, lesson:'5-6', de:'der Arzt', ru:'–≤—Ä–∞—á', pos:'—Å—É—â', article:'der'},
      {id:230, day:3, core:true, lesson:'5-6', de:'die Tochter', ru:'–¥–æ—á—å', pos:'—Å—É—â', article:'die'},
      {id:231, day:3, core:true, lesson:'8', de:'das B√ºro', ru:'–æ—Ñ–∏—Å', pos:'—Å—É—â', article:'das'},
      {id:232, day:3, core:true, lesson:'8', de:'der Arbeitstag', ru:'—Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å', pos:'—Å—É—â', article:'der'},
      {id:233, day:3, core:true, lesson:'8', de:'die Woche', ru:'–Ω–µ–¥–µ–ª—è', pos:'—Å—É—â', article:'die'},
      {id:234, day:3, core:true, lesson:'9-10', de:'das Geld', ru:'–¥–µ–Ω—å–≥–∏', pos:'—Å—É—â', article:'das'},
      {id:235, day:3, core:true, lesson:'9-10', de:'das W√∂rterbuch', ru:'—Å–ª–æ–≤–∞—Ä—å', pos:'—Å—É—â', article:'das'},
      {id:236, day:3, core:true, lesson:'9-10', de:'der Lehrer', ru:'—É—á–∏—Ç–µ–ª—å', pos:'—Å—É—â', article:'der'},
      {id:237, day:3, core:true, lesson:'9-10', de:'der Sch√ºler', ru:'—É—á–µ–Ω–∏–∫', pos:'—Å—É—â', article:'der'},
      {id:238, day:3, core:true, lesson:'9-10', de:'der Hund', ru:'—Å–æ–±–∞–∫–∞', pos:'—Å—É—â', article:'der'},
      {id:239, day:3, core:true, lesson:'9-10', de:'der Beruf', ru:'–ø—Ä–æ—Ñ–µ—Å—Å–∏—è', pos:'—Å—É—â', article:'der'},
      {id:240, day:3, core:true, lesson:'9-10', de:'das Auto', ru:'–º–∞—à–∏–Ω–∞', pos:'—Å—É—â', article:'das'},
      {id:241, day:3, core:true, lesson:'7', de:'der Computer', ru:'–∫–æ–º–ø—å—é—Ç–µ—Ä', pos:'—Å—É—â', article:'der'},
      {id:242, day:3, core:true, lesson:'7', de:'die Stunde', ru:'—á–∞—Å, —É—Ä–æ–∫', pos:'—Å—É—â', article:'die'},
      {id:243, day:3, core:true, lesson:'7', de:'der Kindergarten', ru:'–¥–µ—Ç—Å–∫–∏–π —Å–∞–¥', pos:'—Å—É—â', article:'der'},
      {id:244, day:3, core:true, lesson:'7', de:'die Abteilung', ru:'–æ—Ç–¥–µ–ª', pos:'—Å—É—â', article:'die'},
      {id:245, day:3, core:true, lesson:'7', de:'der Kunde', ru:'–∫–ª–∏–µ–Ω—Ç', pos:'—Å—É—â', article:'der'},
      {id:246, day:3, core:true, lesson:'3.1', de:'zu Hause', ru:'–¥–æ–º–∞', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:247, day:3, core:true, lesson:'3.1', de:'nach Hause', ru:'–¥–æ–º–æ–π', pos:'—Ñ—Ä–∞–∑–∞'},

      // DAY 4 ‚Äî –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ/—á–∞—Å—Ç–∏—Ü—ã/—Å–≤—è–∑–∫–∏ + –ø–æ–ª–µ–∑–Ω—ã–µ
      {id:301, day:4, core:true, lesson:'3', de:'kein', ru:'–Ω–µ (–æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ)', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:302, day:4, core:true, lesson:'3', de:'nur', ru:'—Ç–æ–ª—å–∫–æ', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:303, day:4, core:true, lesson:'3', de:'sehr', ru:'–æ—á–µ–Ω—å', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:304, day:4, core:true, lesson:'3', de:'aber', ru:'–Ω–æ', pos:'—Å–æ—é–∑'},
      {id:305, day:4, core:true, lesson:'5-6', de:'hoffentlich', ru:'–Ω–∞–¥–µ—é—Å—å', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:306, day:4, core:true, lesson:'5-6', de:'vielleicht', ru:'–≤–æ–∑–º–æ–∂–Ω–æ', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:307, day:4, core:true, lesson:'5-6', de:'beide', ru:'–æ–±–∞, –æ–±–µ', pos:'–º–µ—Å—Ç–æ–∏–º.'},
      {id:308, day:4, core:true, lesson:'5-6', de:'schneller', ru:'–±—ã—Å—Ç—Ä–µ–µ', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:309, day:4, core:true, lesson:'5-6', de:'l√§nger', ru:'–¥–æ–ª—å—à–µ', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:310, day:4, core:true, lesson:'5-6', de:'leider', ru:'–∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:311, day:4, core:true, lesson:'5-6', de:'zusammen', ru:'–≤–º–µ—Å—Ç–µ', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:312, day:4, core:true, lesson:'7', de:'erst', ru:'—Å–ø–µ—Ä–≤–∞, —Ç–æ–ª—å–∫–æ', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:313, day:4, core:true, lesson:'7', de:'einmal', ru:'–æ–¥–∏–Ω —Ä–∞–∑', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:314, day:4, core:true, lesson:'7', de:'ruhig', ru:'—Å–ø–æ–∫–æ–π–Ω—ã–π, —Ç–∏—Ö–∏–π', pos:'–ø—Ä–∏–ª.'},
      {id:315, day:4, core:true, lesson:'7', de:'mittags', ru:'–¥–Ω—ë–º, –≤ –ø–æ–ª–¥–µ–Ω—å', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:316, day:4, core:true, lesson:'8', de:'schon', ru:'—É–∂–µ', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:317, day:4, core:true, lesson:'8', de:'noch', ru:'–µ—â—ë', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:318, day:4, core:true, lesson:'8', de:'k√∂nnen', ru:'–º–æ—á—å, —É–º–µ—Ç—å', pos:'–º–æ–¥–∞–ª—å–Ω—ã–π'},
      {id:319, day:4, core:true, lesson:'8', de:'seit', ru:'—Å (–≤ —Ç–µ—á–µ–Ω–∏–µ)', pos:'–ø—Ä–µ–¥–ª–æ–≥'},
      {id:320, day:4, core:true, lesson:'8', de:'fast', ru:'–ø–æ—á—Ç–∏', pos:'—á–∞—Å—Ç–∏—Ü–∞'},
      {id:321, day:4, core:true, lesson:'8', de:'alles', ru:'–≤—Å—ë', pos:'–º–µ—Å—Ç–æ–∏–º.'},
      {id:322, day:4, core:true, lesson:'8', de:'bestimmt', ru:'–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:323, day:4, core:true, lesson:'8', de:'sich freuen', ru:'—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è', pos:'–≥–ª–∞–≥–æ–ª'},
      {id:324, day:4, core:true, lesson:'8', de:'viel', ru:'–º–Ω–æ–≥–æ', pos:'–º–µ—Å—Ç–æ–∏–º.'},
      {id:325, day:4, core:true, lesson:'8', de:'an (am Montag)', ru:'–≤ (–≤—Ä–µ–º—è); —É/–Ω–∞', pos:'–ø—Ä–µ–¥–ª–æ–≥'},
      {id:326, day:4, core:true, lesson:'8', de:'meistens', ru:'–æ–±—ã—á–Ω–æ', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:327, day:4, core:true, lesson:'8', de:'gegen (7 Uhr)', ru:'–æ–∫–æ–ª–æ (–ø–æ –≤—Ä–µ–º–µ–Ω–∏)', pos:'–ø—Ä–µ–¥–ª–æ–≥'},
      {id:328, day:4, core:true, lesson:'4', de:'ein bisschen', ru:'–Ω–µ–º–Ω–æ–≥–æ', pos:'—Ñ—Ä–∞–∑–∞'},
      {id:329, day:4, core:true, lesson:'4', de:'gerade', ru:'—Å–µ–π—á–∞—Å (–∫–∞–∫ —Ä–∞–∑)', pos:'–Ω–∞—Ä–µ—á–∏–µ'},
      {id:330, day:4, core:true, lesson:'4', de:'etwas', ru:'—á—Ç–æ-–Ω–∏–±—É–¥—å', pos:'–º–µ—Å—Ç–æ–∏–º.'},
      {id:331, day:4, core:true, lesson:'4', de:'alt', ru:'—Å—Ç–∞—Ä—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:332, day:4, core:true, lesson:'4', de:'klein', ru:'–º–∞–ª–µ–Ω—å–∫–∏–π', pos:'–ø—Ä–∏–ª.'},
      {id:333, day:4, core:true, lesson:'4', de:'bequem', ru:'—É–¥–æ–±–Ω—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:334, day:4, core:true, lesson:'4', de:'lecker', ru:'–≤–∫—É—Å–Ω—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:335, day:4, core:true, lesson:'4', de:'formell', ru:'–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:336, day:4, core:true, lesson:'4', de:'informell', ru:'–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:337, day:4, core:true, lesson:'3', de:'teuer', ru:'–¥–æ—Ä–æ–≥–æ–π', pos:'–ø—Ä–∏–ª.'},
      {id:338, day:4, core:true, lesson:'3', de:'praktisch', ru:'–ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:339, day:4, core:true, lesson:'3', de:'neu', ru:'–Ω–æ–≤—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:340, day:4, core:true, lesson:'3', de:'sch√∂n', ru:'–∫—Ä–∞—Å–∏–≤—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:341, day:4, core:true, lesson:'3', de:'g√ºnstig', ru:'–≤—ã–≥–æ–¥–Ω—ã–π', pos:'–ø—Ä–∏–ª.'},
      {id:342, day:4, core:true, lesson:'3', de:'schade', ru:'–∂–∞–ª—å', pos:'—Å–ª–æ–≤–æ'},
      {id:343, day:4, core:true, lesson:'9-10', de:'nat√ºrlich', ru:'–∫–æ–Ω–µ—á–Ω–æ', pos:'—Å–ª–æ–≤–æ'},
      {id:344, day:4, core:true, lesson:'9-10', de:'eigentlich', ru:'–≤–æ–æ–±—â–µ-—Ç–æ', pos:'—Å–ª–æ–≤–æ'},
      {id:345, day:4, core:true, lesson:'9-10', de:'besonders', ru:'–æ—Å–æ–±–µ–Ω–Ω–æ/–æ—Å–æ–±–µ–Ω–Ω—ã–π', pos:'—Å–ª–æ–≤–æ'},
      {id:346, day:4, core:true, lesson:'5-6', de:'Das ist nicht fair', ru:'–¢–∞–∫ –Ω–µ —á–µ—Å—Ç–Ω–æ', pos:'—Ñ—Ä–∞–∑–∞'}
    ];

    // --------------------- STATE & HELPERS ---------------------
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const state = {
      idx: 0,
      pool: [],
      view: 'cards',
      day: 'all',
      starOnly: false,
      quiz: {qIdx:0, set:[], score:0},
      dark: true,
    };

    const LS = {
      stars: new Set(JSON.parse(localStorage.getItem('de_stars')||'[]')),
      known: new Set(JSON.parse(localStorage.getItem('de_known')||'[]')),
      dark: JSON.parse(localStorage.getItem('de_dark')||'true')
    };
    state.dark = LS.dark;
    if(!state.dark){ document.documentElement.style.setProperty('--bg','#f6f7fb'); document.body.style.color='#0b1220'; }

    function saveLS(){
      localStorage.setItem('de_stars', JSON.stringify([...LS.stars]));
      localStorage.setItem('de_known', JSON.stringify([...LS.known]));
      localStorage.setItem('de_dark', JSON.stringify(state.dark));
    }

    function tts(text, lang='de-DE'){
      if(!('speechSynthesis' in window)) return alert('TTS –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ');
      const u = new SpeechSynthesisUtterance(text);
      u.lang = lang; u.rate = 0.95; u.pitch = 1; u.volume = 1;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
    }

    function fmtCount(n){
      return n+ ' ' + (n%10===1 && n%100!==11 ? '—Å–ª–æ–≤–æ' : (n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? '—Å–ª–æ–≤–∞' : '—Å–ª–æ–≤'))
    }

    function setIcons(){ if(window.lucide) lucide.createIcons(); }

    function filterPool(){
      let p = WORDS.filter(w=>w.core);
      if(state.day !== 'all') p = p.filter(w=>String(w.day)===String(state.day));
      if(state.starOnly) p = p.filter(w=>LS.stars.has(w.id));
      const q = $('#search').value.trim().toLowerCase();
      if(q){ p = p.filter(w=> w.de.toLowerCase().includes(q) || (w.ru||'').toLowerCase().includes(q)); }
      state.pool = p;
      $('#count').textContent = fmtCount(p.length);
      updateProgress();
      return p;
    }

    function current(){ return state.pool[state.idx] }

    function updateProgress(){
      const total = state.pool.length;
      const known = state.pool.filter(w=>LS.known.has(w.id)).length;
      $('#progressText').textContent = `${known} / ${total}`;
      const pct = total? Math.round(known*100/total):0;
      $('#progressBar').style.width = pct + '%';
    }

    function renderCard(){
      const w = current();
      if(!w){ $('#cardWord').textContent = '–ù–µ—Ç —Å–ª–æ–≤ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º'; $('#cardTrans').textContent='‚Äî'; return; }
      $('#card').classList.remove('flipped');
      $('#cardWord').textContent = w.de + (w.article?`  (${w.article})`:'' );
      $('#cardTrans').textContent = w.ru || '‚Äî';
      $('#cardMeta').textContent = `Lektion ${w.lesson || '?'} ‚Ä¢ –î–µ–Ω—å ${w.day} ‚Ä¢ ${w.pos||''}`;
      $('#example').textContent = w.ex || '';
      $('#example2').textContent = w.ex || '';
      $('#starBtn').setAttribute('aria-pressed', LS.stars.has(w.id));
      setIcons();
    }

    function renderList(){
      const wrap = $('#listView'); wrap.innerHTML='';
      for(const w of state.pool){
        const row = document.createElement('div'); row.className='row';
        row.innerHTML = `
          <button class="round" data-say-de="${w.id}" title="–û–∑–≤—É—á–∏—Ç—å"><i data-lucide="volume-2"></i></button>
          <div class="main">
            <div class="de">${w.de}${w.article?` <span class="pill">${w.article}</span>`:''}</div>
            <div class="ru">${w.ru}</div>
            <div class="tags">
              <span class="tag">Lektion ${w.lesson||'?'} / –î–µ–Ω—å ${w.day}</span>
              <span class="tag">${w.pos||''}</span>
            </div>
          </div>
          <button class="round" data-star="${w.id}" title="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"><i data-lucide="star"></i></button>
          <button class="round" data-known="${w.id}" title="–ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã—É—á–µ–Ω–æ"><i data-lucide="check"></i></button>
        `;
        wrap.appendChild(row);
      }
      setIcons();
    }

    function pickIdx(dir=1){
      if(state.pool.length===0){state.idx=0; return}
      state.idx = (state.idx + dir + state.pool.length) % state.pool.length;
    }

    // --------------------- QUIZ ---------------------
    function startQuiz(){
      const base = [...state.pool];
      if(base.length<4){ $('#qWord').textContent='–î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —Å–ª–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∞'; return; }
      shuffle(base);
      state.quiz.set = base.slice(0, Math.min(10, base.length));
      state.quiz.qIdx = 0; state.quiz.score = 0; $('#quizSummary').style.display='none';
      nextQ();
    }
    function nextQ(){
      const q = state.quiz.set[state.quiz.qIdx];
      if(!q){ showQuizSummary(); return; }
      $('#quizInfo').textContent = `–í–æ–ø—Ä–æ—Å ${state.quiz.qIdx+1}/${state.quiz.set.length}`;
      $('#qWord').textContent = q.de;
      const optsWrap = $('#opts'); optsWrap.innerHTML='';
      const wrong = sample([...WORDS.filter(w=>w.ru && w.id!==q.id)], 3);
      const opts = shuffle([q, ...wrong]);
      opts.forEach(o=>{
        const b = document.createElement('button'); b.className='opt'; b.textContent = o.ru;
        b.onclick = ()=>{
          if(b.dataset.lock) return; b.dataset.lock=true;
          if(o.id===q.id){ b.dataset.state='good'; state.quiz.score++; markKnown(q.id); }
          else { b.dataset.state='bad'; }
          setTimeout(()=>{ state.quiz.qIdx++; if(state.quiz.qIdx>=state.quiz.set.length) showQuizSummary(); else nextQ(); }, 500);
        };
        optsWrap.appendChild(b);
      });
      setIcons();
      $('#quizPlay').onclick = ()=> tts(q.de, 'de-DE');
    }
    function showQuizSummary(){
      $('#quizSummary').style.display='flex';
      $('#score').textContent = `${state.quiz.score} / ${state.quiz.set.length}`;
    }

    // --------------------- UTIL ---------------------
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr }
    function sample(arr, n){ arr=[...arr]; shuffle(arr); return arr.slice(0,n) }

    function markKnown(id){ LS.known.add(id); saveLS(); updateProgress(); }

    function applyFilters(){ filterPool(); state.idx=0; renderCard(); renderList(); setIcons(); }

    // --------------------- EVENTS ---------------------
    window.addEventListener('load', ()=>{
      // Tabs
      $$('.tab').forEach(t=> t.onclick = ()=>{
        $$('.tab').forEach(x=>x.dataset.active=false); t.dataset.active=true;
        state.view = t.dataset.tab; $('#modeSelect').value = state.view;
        $('#cardsView').classList.toggle('hidden', state.view!=='cards');
        $('#listView').classList.toggle('hidden', state.view!=='list');
        $('#quizView').classList.toggle('hidden', state.view!=='quiz');
        $('#planView').classList.toggle('hidden', state.view!=='plan');
        if(state.view==='quiz') startQuiz();
        setIcons();
      });

      // Selectors
      $('#modeSelect').onchange = (e)=>{
        const tab = e.target.value; document.querySelector(`.tab[data-tab="${tab}"]`).click();
      }
      $('#daySelect').onchange = (e)=>{ state.day = e.target.value; applyFilters(); };
      $('#starOnly').onclick = ()=>{ state.starOnly = !state.starOnly; $('#starOnly').setAttribute('aria-pressed', state.starOnly); applyFilters(); };
      $('#search').oninput = ()=> applyFilters();

      // Card buttons
      $('#flip').onclick = ()=> $('#card').classList.add('flipped');
      $('#flipBack').onclick = ()=> $('#card').classList.remove('flipped');
      $('#next').onclick = ()=> { pickIdx(1); renderCard(); };
      $('#shuffle').onclick = ()=> { shuffle(state.pool); state.idx=0; renderCard(); };
      $('#know').onclick = ()=> { const w=current(); if(w) { markKnown(w.id); pickIdx(1); renderCard(); } };

      // Audio
      $('#speakDE').onclick = ()=> current() && tts(current().de, 'de-DE');
      $('#speakRU').onclick = ()=> current() && tts(current().ru, 'ru-RU');
      $('#speakDE2').onclick = ()=> current() && tts(current().de, 'de-DE');
      $('#speakRU2').onclick = ()=> current() && tts(current().ru, 'ru-RU');

      // Star
      $('#starBtn').onclick = ()=> { const w=current(); if(!w) return; if(LS.stars.has(w.id)) LS.stars.delete(w.id); else LS.stars.add(w.id); saveLS(); $('#starBtn').setAttribute('aria-pressed', LS.stars.has(w.id)); };

      // List actions (event delegation)
      $('#listView').addEventListener('click', (e)=>{
        const b = e.target.closest('button'); if(!b) return;
        if(b.dataset.sayDe){ const w = WORDS.find(x=>x.id==b.dataset.sayDe); if(w) tts(w.de,'de-DE'); }
        if(b.dataset.star){ const id = +b.dataset.star; if(LS.stars.has(id)) LS.stars.delete(id); else LS.stars.add(id); saveLS(); applyFilters(); }
        if(b.dataset.known){ const id = +b.dataset.known; markKnown(id); applyFilters(); }
      });

      // Quiz
      $('#quizRestart').onclick = startQuiz;
      $('#quizAgain').onclick = startQuiz;
      $('#quizCards').onclick = ()=> document.querySelector('.tab[data-tab="cards"]').click();

      // Dark mode
      $('#darkToggle').onclick = ()=>{
        state.dark = !state.dark;
        if(state.dark){ document.documentElement.style.setProperty('--bg','#0b0f14'); document.body.style.color='var(--text)'; }
        else { document.documentElement.style.setProperty('--bg','#f6f7fb'); document.body.style.color='#0b1220'; }
        saveLS();
      }

      // Reset
      $('#resetProgress').onclick = ()=>{
        if(confirm('–°–±—Ä–æ—Å–∏—Ç—å –æ—Ç–º–µ—Ç–∫–∏ –≤—ã—É—á–µ–Ω–Ω–æ–≥–æ –∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ?')){
          LS.known.clear(); LS.stars.clear(); saveLS(); applyFilters(); renderPlan();
        }
      }

      // Init
      applyFilters(); renderCard(); renderList(); renderPlan(); setIcons();
    });

    function renderPlan(){
      const cont = $('#planCards'); cont.innerHTML='';
      for(let d=1; d<=4; d++){
        const all = WORDS.filter(w=>w.core && w.day===d);
        const known = all.filter(w=>LS.known.has(w.id));
        const pct = all.length? Math.round(known.length*100/all.length):0;
        const card = document.createElement('div'); card.className='quiz-card';
        card.innerHTML = `
          <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; margin-bottom:8px">
            <div style="font-weight:700">–î–µ–Ω—å ${d}</div>
            <div class="pill">${known.length} / ${all.length}</div>
          </div>
          <div class="progress" style="margin:8px 0 12px"><i style="width:${pct}%"></i></div>
          <div style="display:flex; gap:8px; flex-wrap:wrap">
            <button class="btn" onclick="document.getElementById('daySelect').value='${d}'; state.day='${d}'; document.querySelector('.tab[data-tab=\'cards\']').click(); applyFilters();">–£—á–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏</button>
            <button class="btn" onclick="document.getElementById('daySelect').value='${d}'; state.day='${d}'; document.querySelector('.tab[data-tab=\'quiz\']').click(); applyFilters(); startQuiz();">–¢–µ—Å—Ç –Ω–∞ –¥–µ–Ω—å</button>
          </div>
        `;
        cont.appendChild(card);
      }
    }
  </script>
</body>
</html>
